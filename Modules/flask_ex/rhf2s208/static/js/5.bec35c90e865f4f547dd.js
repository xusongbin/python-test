webpackJsonp([5],{"6Qob":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=e("M9A7"),n={name:"login",data:function(){return{formInline:{user:"",password:"",error:""},formInit:{user:"",password:"",newpassword:"",againpassword:"",error:""},initPassword:!1,loginLoading:!1}},computed:{langSw:function(){return this.$store.state.lang},loginRules:function(){var t=this;return{user:[{required:!0,message:this.$t("login.userRules"),trigger:"blur"}],password:[{required:!0,message:this.$t("login.passwordRules"),trigger:"blur"},{type:"string",min:5,message:this.$t("login.passWordLenRules"),trigger:"blur"}],newpassword:[{required:!0,message:this.$t("login.newPasswordRules"),trigger:"blur"},{type:"string",min:5,message:this.$t("login.passWordLenRules"),trigger:"blur"}],againpassword:[{validator:function(s,e,r){""===e?r(new Error(t.$t("login.againPasswordRules"))):e.length<5?r(new Error(t.$t("login.passWordLenRules"))):t.formInit.againpassword!==t.formInit.newpassword?r(new Error(t.$t("login.twoInputPasswordNot"))):r()},trigger:"blur"}]}},userPasswordNot:function(){return this.$t("login.userPasswordNot")}},methods:{setLang:function(t){this.$i18n.locale=t,this.$store.commit("langSw",t)},handleSubmit:function(t){var s=this;this.formInline.error="",this.loginLoading=!0,this.$refs[t].validate(function(t){if(t){var e={username:s.formInline.user,passwd:s.formInline.password};Object(r.a)(e).then(function(t){s.loginLoading=!1,0==t.data.result?(s.$store.commit("netWork",!0),s.$store.commit("loginSw",!0),s.$store.commit("cookieSw",t.data.data.hash_key),s.$router.push({name:s.$config.homeName})):s.formInline.error=s.userPasswordNot})}else s.loginLoading=!1})},initPasswordFun:function(t){var s=this;this.formInit.error="",this.loginLoading=!0,this.$refs[t].validate(function(t){if(t){var e={username:s.formInit.user,passwd:s.formInit.password,newPasswd:s.formInit.newpassword,confirmPasswd:s.formInit.againpassword};Object(r.c)(e).then(function(t){s.loginLoading=!1,0==t.data.result?(s.$Message.success(s.$t("login.changePwdSuccess")),s.initPassword=!1,s.$store.commit("loginSw",!1)):s.formInit.error=s.userPasswordNot})}else s.loginLoading=!1})}}},o={render:function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("div",{staticClass:"login"},[r("div",{directives:[{name:"show",rawName:"v-show",value:0==t.initPassword,expression:"initPassword == false"}],on:{keyup:function(s){return s.type.indexOf("key")||13===s.keyCode?t.handleSubmit("formInline"):null}}},[r("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.loginRules}},[r("FormItem",{style:{textAlign:"center"}},[r("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:e("YtCu"),alt:""}}),t._v(" "),r("ButtonGroup",{staticClass:"btngroup",staticStyle:{"margin-right":"20px",float:"right"}},[r("Button",{attrs:{type:"text",ghost:""},on:{click:function(s){return t.setLang("zh")}}},[r("span",{staticClass:"langImg zhImg",class:{langcheck:"zh"==t.langSw}})]),t._v(" "),r("Button",{attrs:{type:"text",ghost:""},on:{click:function(s){return t.setLang("en")}}},[r("span",{staticClass:"langImg enImg",class:{langcheck:"en"==t.langSw}})])],1)],1),t._v(" "),r("FormItem",{staticClass:"boxShow",attrs:{prop:"user",error:t.formInline.error}},[r("Input",{attrs:{type:"text",placeholder:t.$t("login.user")},model:{value:t.formInline.user,callback:function(s){t.$set(t.formInline,"user",s)},expression:"formInline.user"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),t._v(" "),r("FormItem",{staticClass:"boxShow",attrs:{prop:"password",error:t.formInline.error}},[r("Input",{attrs:{type:"password",placeholder:t.$t("login.password")},model:{value:t.formInline.password,callback:function(s){t.$set(t.formInline,"password",s)},expression:"formInline.password"}},[r("Icon",{attrs:{slot:"prepend",type:"md-key"},slot:"prepend"})],1)],1),t._v(" "),r("FormItem",[r("Button",{staticClass:"passwd",attrs:{loading:t.loginLoading,type:"primary"},on:{click:function(s){return t.handleSubmit("formInline")}}},[t._v(t._s(t.$t("login.submit")))]),t._v(" "),r("Button",{staticClass:"forget passwd",staticStyle:{width:"auto",float:"right",display:"inline"},attrs:{type:"text"},on:{click:function(s){t.initPassword=!0}}},[t._v(t._s(t.$t("login.initPassword"))+"?")])],1)],1)],1),t._v(" "),r("Modal",{attrs:{"mask-closable":!1,title:t.$t("login.initPassword"),"class-name":"vertical-center-modal logins"},model:{value:t.initPassword,callback:function(s){t.initPassword=s},expression:"initPassword"}},[r("div",{on:{keyup:function(s){return s.type.indexOf("key")||13===s.keyCode?t.initPasswordFun("formInit"):null}}},[r("Form",{ref:"formInit",attrs:{model:t.formInit,rules:t.loginRules}},[r("FormItem",{attrs:{prop:"user"}},[r("Input",{attrs:{type:"text",placeholder:t.$t("login.user")},model:{value:t.formInit.user,callback:function(s){t.$set(t.formInit,"user",s)},expression:"formInit.user"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),t._v(" "),r("FormItem",{attrs:{prop:"password"}},[r("Input",{attrs:{type:"password",placeholder:t.$t("login.oldPassword")},model:{value:t.formInit.password,callback:function(s){t.$set(t.formInit,"password",s)},expression:"formInit.password"}},[r("Icon",{attrs:{slot:"prepend",type:"md-key"},slot:"prepend"})],1)],1),t._v(" "),r("FormItem",{attrs:{prop:"newpassword"}},[r("Input",{attrs:{type:"password",placeholder:t.$t("login.newPassword")},model:{value:t.formInit.newpassword,callback:function(s){t.$set(t.formInit,"newpassword",s)},expression:"formInit.newpassword"}},[r("Icon",{attrs:{slot:"prepend",type:"md-key"},slot:"prepend"})],1)],1),t._v(" "),r("FormItem",{attrs:{prop:"againpassword"}},[r("Input",{attrs:{type:"password",placeholder:t.$t("login.againPassword")},model:{value:t.formInit.againpassword,callback:function(s){t.$set(t.formInit,"againpassword",s)},expression:"formInit.againpassword"}},[r("Icon",{attrs:{slot:"prepend",type:"md-key"},slot:"prepend"})],1)],1),t._v(" "),r("FormItem",{staticStyle:{"text-align":"right"}},[r("Button",{staticClass:"btns",attrs:{ghost:"",type:"info",size:"large"},on:{click:function(s){t.initPassword=!1}}},[t._v(t._s(t.$t("login.close")))]),t._v(" "),r("Button",{staticStyle:{"margin-left":"10px"},attrs:{loading:t.loginLoading,type:"primary",size:"large"},on:{click:function(s){return t.initPasswordFun("formInit")}}},[t._v(t._s(t.$t("login.ok")))])],1)],1)],1)])],1)},staticRenderFns:[]};var i=e("C7Lr")(n,o,!1,function(t){e("kmY2")},null,null);s.default=i.exports},kmY2:function(t,s){}});